---
title: aws data transfer 트래픽 문제(폰트)
date: 2023-04-12 02:00:00 +09:00
categories: [웹, 개발 고민]
tags: [font, ttf, traffic, aws, data-transfer]
---

# aws data transfer 트래픽 이상

불과 하루도 안되어 프리티어 공짜 한도인 1gb 중 거의 700mb를 사용했다.

처음엔 해킹도 의심했지만 그렇다기엔 이상한 점이 한둘이 아니라, 이 트래픽을 추적하다보니 ttf 파일이 혼자 600mmb 정도 차지하고 있었다.

ttf 파일은 리액트 프로젝트 생성시 자동으로 assets/font에 들어가 있었고, 정확히 이 폴더 내 용량 합이었다.

이 용량이 무려 13mb라 굉장히 트래픽에 부담되는 현상이 일어난 것이다.

이 때문에 웹사이트 로드도 굉장히 느려졌었고, 어떻게든 해결해야겠다고 생각했다.

처음엔 cdn을 활용해서 폰트를 서비스할까 생각했지만, 이 역시 전보단 훨씬 낫겠지만 지연이 발생하고, 앞으로 남은 한도를 생각하면 더 트래픽을 아낄 필요성이 느껴졌다.

그래서 woff 형식의 압축으로 직접 제공할까 생각했지만 이 역시 한글 폰트를 제공하기에 너무 용량이 컸다.

subset을 활용할 생각도 했지만, 게시판 특성상 자주 않쓰는 한글 글자도 활용될 확률이 높아 만에 하나 그런 상황이 발생할 것을 상상하면 한 문장 내에 폰트가 서로 다른 현상은 반갑지 않았다.

그렇기에 트래픽은 하나도 발생하지 않는 src: local로 font-face를 설정하고, 최대한 사용자 로컬 환경에서 폰트를 활용하기로 했다.

사실 로컬에만 의존하는 것은 사용자 환경에 따라 굉장히 서비스가 달라질 환경이 있어 실제 서비스에선 보조적으로 활용하는 것이 좋아보였지만, 일단 이번달은 남은 무료 트래픽도 거의 없고 해서, 최대한 아끼기로 했다.

다음 달엔 local과 woff2를 활용해서 폰트를 제공하지 않을까 싶다.

그리고, 여기서 더 아끼기 위해 캐시 설정을 하기로 했고, 그것은 따로 다른 포스팅에서 다뤄놓았다.
